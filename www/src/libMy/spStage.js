!function(t){var i=window.webpackHotUpdate;window.webpackHotUpdate=function(t,e){!function(t,i){if(!_[t]||!S[t])return;for(var e in S[t]=!1,i)Object.prototype.hasOwnProperty.call(i,e)&&(f[e]=i[e]);0==--y&&0===x&&b()}(t,e),i&&i(t,e)};var e,n=!0,r="0dde6163ccf5ee650abb",s=1e4,o={},a=[],h=[];function l(t){var i=A[t];if(!i)return M;var n=function(n){return i.hot.active?(A[n]?-1===A[n].parents.indexOf(t)&&A[n].parents.push(t):(a=[t],e=n),-1===i.children.indexOf(n)&&i.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+t),a=[]),M(n)},r=function(t){return{configurable:!0,enumerable:!0,get:function(){return M[t]},set:function(i){M[t]=i}}};for(var s in M)Object.prototype.hasOwnProperty.call(M,s)&&"e"!==s&&"t"!==s&&Object.defineProperty(n,s,r(s));return n.e=function(t){return"ready"===d&&u("prepare"),x++,M.e(t).then(i,function(t){throw i(),t});function i(){x--,"prepare"===d&&(v[t]||R(t),0===x&&0===y&&b())}},n.t=function(t,i){return 1&i&&(t=n(t)),M.t(t,-2&i)},n}function c(t){var i={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:e!==t,active:!0,accept:function(t,e){if(void 0===t)i._selfAccepted=!0;else if("function"==typeof t)i._selfAccepted=t;else if("object"==typeof t)for(var n=0;n<t.length;n++)i._acceptedDependencies[t[n]]=e||function(){};else i._acceptedDependencies[t]=e||function(){}},decline:function(t){if(void 0===t)i._selfDeclined=!0;else if("object"==typeof t)for(var e=0;e<t.length;e++)i._declinedDependencies[t[e]]=!0;else i._declinedDependencies[t]=!0},dispose:function(t){i._disposeHandlers.push(t)},addDisposeHandler:function(t){i._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=i._disposeHandlers.indexOf(t);e>=0&&i._disposeHandlers.splice(e,1)},check:m,apply:H,status:function(t){if(!t)return d;p.push(t)},addStatusHandler:function(t){p.push(t)},removeStatusHandler:function(t){var i=p.indexOf(t);i>=0&&p.splice(i,1)},data:o[t]};return e=void 0,i}var p=[],d="idle";function u(t){d=t;for(var i=0;i<p.length;i++)p[i].call(null,t)}var g,f,P,y=0,x=0,v={},S={},_={};function w(t){return+t+""===t?+t:t}function m(t){if("idle"!==d)throw new Error("check() is only allowed in idle status");return n=t,u("check"),(i=s,i=i||1e4,new Promise(function(t,e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var n=new XMLHttpRequest,r=M.p+"hot-update/hot-update.json";n.open("GET",r,!0),n.timeout=i,n.send(null)}catch(t){return e(t)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)e(new Error("Manifest request to "+r+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)e(new Error("Manifest request to "+r+" failed."));else{try{var i=JSON.parse(n.responseText)}catch(t){return void e(t)}t(i)}}})).then(function(t){if(!t)return u("idle"),null;S={},v={},_=t.c,P=t.h,u("prepare");var i=new Promise(function(t,i){g={resolve:t,reject:i}});f={};return R(0),"prepare"===d&&0===x&&0===y&&b(),i});var i}function R(t){var i;_[t]?(S[t]=!0,y++,(i=document.createElement("script")).charset="utf-8",i.src=M.p+"hot-update/hot-update.js",document.head.appendChild(i)):v[t]=!0}function b(){u("ready");var t=g;if(g=null,t)if(n)Promise.resolve().then(function(){return H(n)}).then(function(i){t.resolve(i)},function(i){t.reject(i)});else{var i=[];for(var e in f)Object.prototype.hasOwnProperty.call(f,e)&&i.push(w(e));t.resolve(i)}}function H(i){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var e,n,s,h,l;function c(t){for(var i=[t],e={},n=i.slice().map(function(t){return{chain:[t],id:t}});n.length>0;){var r=n.pop(),s=r.id,o=r.chain;if((h=A[s])&&!h.hot._selfAccepted){if(h.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:s};if(h.hot._main)return{type:"unaccepted",chain:o,moduleId:s};for(var a=0;a<h.parents.length;a++){var l=h.parents[a],c=A[l];if(c){if(c.hot._declinedDependencies[s])return{type:"declined",chain:o.concat([l]),moduleId:s,parentId:l};-1===i.indexOf(l)&&(c.hot._acceptedDependencies[s]?(e[l]||(e[l]=[]),p(e[l],[s])):(delete e[l],i.push(l),n.push({chain:o.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:t,outdatedModules:i,outdatedDependencies:e}}function p(t,i){for(var e=0;e<i.length;e++){var n=i[e];-1===t.indexOf(n)&&t.push(n)}}i=i||{};var g={},y=[],x={},v=function(){console.warn("[HMR] unexpected require("+m.moduleId+") to disposed module")};for(var S in f)if(Object.prototype.hasOwnProperty.call(f,S)){var m;l=w(S);var R=!1,b=!1,H=!1,O="";switch((m=f[S]?c(l):{type:"disposed",moduleId:S}).chain&&(O="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":i.onDeclined&&i.onDeclined(m),i.ignoreDeclined||(R=new Error("Aborted because of self decline: "+m.moduleId+O));break;case"declined":i.onDeclined&&i.onDeclined(m),i.ignoreDeclined||(R=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+O));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(m),i.ignoreUnaccepted||(R=new Error("Aborted because "+l+" is not accepted"+O));break;case"accepted":i.onAccepted&&i.onAccepted(m),b=!0;break;case"disposed":i.onDisposed&&i.onDisposed(m),H=!0;break;default:throw new Error("Unexception type "+m.type)}if(R)return u("abort"),Promise.reject(R);if(b)for(l in x[l]=f[l],p(y,m.outdatedModules),m.outdatedDependencies)Object.prototype.hasOwnProperty.call(m.outdatedDependencies,l)&&(g[l]||(g[l]=[]),p(g[l],m.outdatedDependencies[l]));H&&(p(y,[m.moduleId]),x[l]=v)}var C,D=[];for(n=0;n<y.length;n++)l=y[n],A[l]&&A[l].hot._selfAccepted&&D.push({module:l,errorHandler:A[l].hot._selfAccepted});u("dispose"),Object.keys(_).forEach(function(t){!1===_[t]&&function(t){delete installedChunks[t]}(t)});for(var I,L,k=y.slice();k.length>0;)if(l=k.pop(),h=A[l]){var T={},j=h.hot._disposeHandlers;for(s=0;s<j.length;s++)(e=j[s])(T);for(o[l]=T,h.hot.active=!1,delete A[l],delete g[l],s=0;s<h.children.length;s++){var E=A[h.children[s]];E&&((C=E.parents.indexOf(l))>=0&&E.parents.splice(C,1))}}for(l in g)if(Object.prototype.hasOwnProperty.call(g,l)&&(h=A[l]))for(L=g[l],s=0;s<L.length;s++)I=L[s],(C=h.children.indexOf(I))>=0&&h.children.splice(C,1);for(l in u("apply"),r=P,x)Object.prototype.hasOwnProperty.call(x,l)&&(t[l]=x[l]);var z=null;for(l in g)if(Object.prototype.hasOwnProperty.call(g,l)&&(h=A[l])){L=g[l];var V=[];for(n=0;n<L.length;n++)if(I=L[n],e=h.hot._acceptedDependencies[I]){if(-1!==V.indexOf(e))continue;V.push(e)}for(n=0;n<V.length;n++){e=V[n];try{e(L)}catch(t){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:l,dependencyId:L[n],error:t}),i.ignoreErrored||z||(z=t)}}}for(n=0;n<D.length;n++){var N=D[n];l=N.module,a=[l];try{M(l)}catch(t){if("function"==typeof N.errorHandler)try{N.errorHandler(t)}catch(e){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:e,originalError:t}),i.ignoreErrored||z||(z=e),z||(z=t)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:l,error:t}),i.ignoreErrored||z||(z=t)}}return z?(u("fail"),Promise.reject(z)):(u("idle"),new Promise(function(t){t(y)}))}var A={};function M(i){if(A[i])return A[i].exports;var e=A[i]={i:i,l:!1,exports:{},hot:c(i),parents:(h=a,a=[],h),children:[]};return t[i].call(e.exports,e,e.exports,l(i)),e.l=!0,e.exports}M.m=t,M.c=A,M.d=function(t,i,e){M.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},M.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},M.t=function(t,i){if(1&i&&(t=M(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(M.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)M.d(e,n,function(i){return t[i]}.bind(null,n));return e},M.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return M.d(i,"a",i),i},M.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},M.p="build/",M.h=function(){return r},l(9)(M.s=9)}([function(t,i,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){var t,i,e,r,s=new THREE.Vector3(0,0,0),a=new THREE.Vector3(0,0,0),h=new THREE.Vector3(0,0,0),l=new THREE.Vector3(0,0,0);this.DEG2RAD=Math.PI/180,this.RAD2DEG=180/Math.PI,this.getAngle=function(t,i){return i=i||l,t=t||l,Math.atan2(i.y-t.y,i.x-t.x)};var c,p,d,u,g,f,P,y,x,v=0;this.getAngle2=function(t,i){return i=i||l,t=t||l,(v=Math.atan2(i.y-t.y,i.x-t.x))<0&&(v+=2*Math.PI),v},this.getDistance=function(t,i){return null==t?0:(null==i&&(i=l),i=i||l,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)))},this.getVector=function(t,i,e){if(null==e)e=new THREE.Vector2(0,0);return t<0&&(i+=Math.PI),e.x=Math.abs(t)*Math.cos(i),e.y=Math.abs(t)*Math.sin(i),e},this.isPointInLin=function(t,e,n,s,o){return this.getTreeAngel(t,e,n),o<0&&2*Math.abs(o)>r?null:a.x<=r+o&&a.x>=-o&&Math.abs(a.y)<=s?((h=a.x<0?this.getVector(a.x,i-Math.PI):this.getVector(a.x,i)).x+=e.x,h.y+=e.y,h.z=a.y,h):null},this.okrugPoint=function(t,i){null==i&&(i=100),t.x=Math.round(t.x/i)*i,t.y=Math.round(t.y/i)*i},this.okrugNumber=function(t,i){null==i&&(i=100);var e=Math.round(t*i)/i;return t=e,e},this.isInTriangle=function(t,i,e,n){var r=(t.x-n.x)*(i.y-t.y)-(i.x-t.x)*(t.y-n.y),s=(i.x-n.x)*(e.y-i.y)-(e.x-i.x)*(i.y-n.y),o=(e.x-n.x)*(t.y-e.y)-(t.x-e.x)*(e.y-n.y);return r>=0&&s>=0&&o>=0||r<=0&&s<=0&&o<=0},this.getTreeAngel=function(t,n,s,o){return i=this.getAngle(n,t),e=this.getAngle(n,s),c=this.getDistance(n,s),r=this.getDistance(t,n),this.getVector(c,e-i,a),e=this.getAngle(l,a),null==o?e:e>0?e:2*Math.PI+e},this.getTreeAngelPI2=function(t,i,e){x1=t.x-i.x,x2=e.x-i.x,y1=t.y-i.y,y2=e.y-i.y,r=Math.sqrt(x1*x1+y1*y1),d2=Math.sqrt(x2*x2+y2*y2);var n=(x1*x2+y1*y2)/(r*d2);return n>1&&(n=1),n<-1&&(n=-1),Math.acos(n)},this.isLineInTriangle=function(i,e,n,r,o){return(t=this.getPointOfIntersection(i,e,r,o))?(s.x=t.x,s.y=t.y,s.z=0,s):(t=this.getPointOfIntersection(e,n,r,o))?(s.x=t.x,s.y=t.y,s.z=1,s):!!(t=this.getPointOfIntersection(n,i,r,o))&&(s.x=t.x,s.y=t.y,s.z=2,s)};var S,_,w,m,R=new THREE.Vector2(0,0);this.getPointOfIntersection=function(t,i,e,n){return c=(t.x-i.x)*(n.y-e.y)-(t.y-i.y)*(n.x-e.x),p=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),d=(t.x-i.x)*(t.y-e.y)-(t.y-i.y)*(t.x-e.x),g=d/c,(u=p/c)>=0&&u<=1&&g>=0&&g<=1?(f=t.x+u*(i.x-t.x),P=t.y+u*(i.y-t.y),R.x=f,R.y=P,R):null},this.korektToLine=function(t,i,e,n,r){y=this.getDistance(t,i),x=null==r?this.getAngle(t,i):r,0!=n&&(R=n<0?this.getVector(-n,x-Math.PI/2):this.getVector(n,x+Math.PI/2),t.x+=R.x,t.y+=R.y,i.x+=R.x,i.y+=R.y),R=this.getVector(e,x),i.x+=R.x,i.y+=R.y,R=this.getVector(e,x+Math.PI),t.x+=R.x,t.y+=R.y},this.getProsent3Point=function(t,i,e){return p=this.getDistance(t,i),(d=this.getDistance(t,e))/p},this.povotorOtAngel=function(t,i,e){return x=this.getAngle(t,i),y=this.getDistance(t,i),this.getVector(y,x+e)},this.testPositPoint=function(t,i,e){return null==e&&(e=100),Math.round(t.x*e)/e==Math.round(i.x*e)/e&&Math.round(t.y*e)/e==Math.round(i.y*e)/e},this.okrugAngel=function(t,i,e){var n=t;S=1,t<0&&(S=-1),_=Math.abs(t),w=Math.round(_/i)+1,m=0;for(var r=w;r>=0;r--){if(_>r*i-e&&_<r*i+e)return n=r*i*S;if(3==++m)return n}return n};var b=new o,H=new o,A=[];this.getLineCircleIntersectionPoints=function(t,i,e,n,r){A.length=0;var s=i.x-t.x,o=i.y-t.y,a=e.x-t.x,h=e.y-t.y,l=s*s+o*o,c=(s*a+o*h)/l,p=c*c-(a*a+h*h-n*n)/l;if(p<0)return A;var d=Math.sqrt(p),u=-c+d,g=-c-d;return b.set(t.x-s*u,t.y-o*u),this.isPointInLine(t,i,b)&&A.push(b),0==p?A:(H.set(t.x-s*g,t.y-o*g),this.isPointInLine(t,i,H)&&A.push(H),r&&2==A.length&&(S=this.getDistance(t,A[0]),_=this.getDistance(t,A[1]),S>_&&A.reverse()),A)},this.isPointInLine=function(t,i,e){var n=calc.getDistance(t,i),r=calc.getDistance(t,e),s=calc.getDistance(i,e);return calc.okrugNumber(r+s)===calc.okrugNumber(n)},this.getDistancePointToLine=function(t,i,e){var n=((i.y-t.y)*e.x-(i.x-t.x)*e.y+i.x*t.y-i.y*t.x)/calc.getDistance(t,i);return-calc.okrugNumber(Number.isFinite(n)?n:0)},this.getCircleCircleIntersectionPoints=function(t,i,e,n){var r,s,o,a,h;return A.length=0,(o=Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2)))>i+n?A:(a=(i*i-n*n+o*o)/(2*o),h=Math.sqrt(Math.pow(i,2)-Math.pow(a,2)),isNaN(h)?A:(r=t.x+a*(e.x-t.x)/o,s=t.y+a*(e.y-t.y)/o,b.x=r+h*(e.y-t.y)/o,b.y=s-h*(e.x-t.x)/o,A.push(b),a==i?A:(H.x=r-h*(e.y-t.y)/o,H.y=s+h*(e.x-t.x)/o,A.push(H),A)))};var M=[new o,new o,new o,new o],O=[new o,new o,new o,new o];this.isIntersectionRect=function(t,i){return M[0].set(t.x,t.y),M[1].set(t.x+t.width,t.y),M[2].set(t.x+t.width,t.y+t.height),M[3].set(t.x,t.y+t.height),O[0].set(i.x,i.y),O[1].set(i.x+i.width,i.y),O[2].set(i.x+i.width,i.y+i.height),O[3].set(i.x,i.y+i.height),this.isIntersectionFromPoint(M,O)},this.isIntersectionFromPoint=function(t,i){for(var e=0;e<t.length-2;e++)for(var n=0;n<i.length-2;n++)if(calc.getPointOfIntersection(t[e],t[(e+2)%t.length],i[n],i[(n+2)%i.length]))return!0;for(e=0;e<t.length;e++)for(n=0;n<i.length;n++)if(calc.getPointOfIntersection(t[e],t[(e+1)%t.length],i[n],i[(n+1)%i.length]))return!0;for(e=0;e<i.length;e+=2)if(calc.contains(i[e].x,i[e].y,t))return!0;for(e=0;e<t.length;e+=2)if(calc.contains(t[e].x,t[e].y,i))return!0;return!1},this.isParalel=function(t,i,e,n,r){r=r||0;var s=Math.abs(calc.getAngle(t,i)%Math.PI),o=Math.abs(calc.getAngle(i,t)%Math.PI),a=Math.abs(calc.getAngle(e,n)%Math.PI),h=Math.abs(calc.getAngle(n,e)%Math.PI);return Math.min(Math.abs(s-a),Math.abs(o-h),Math.abs(s-h),Math.abs(o-a))<=r},this.rotationPoint=function(t,i,e){var n=0,r=0;e?(n=e.x+(t.x-e.x)*Math.cos(i)-(t.y-e.y)*Math.sin(i),r=e.y+(t.y-e.y)*Math.cos(i)+(t.x-e.x)*Math.sin(i)):(n=t.x*Math.cos(i)-t.y*Math.sin(i),r=t.y*Math.cos(i)+t.x*Math.sin(i)),t.x=n,t.y=r},this.rotationPointByLength=function(t,i,e){e=e||l;var n=calc.getDistance(t,e),r=calc.getLenghtCircle(n),s=i*(2*Math.PI/r);calc.rotationPoint(t,s,e)},this.isIntersectionTriangle=function(t,i,e,n,r,s){for(var o=!1,a=[t,i,e],h=[n,r,s],l=0;l<a.length&&!o;l++)o=calc.isInTriangle(n,r,s,a[l]);for(l=0;l<h.length&&!o;l++)o=calc.isInTriangle(t,i,e,h[l]);if(!o)for(l=0;l<a.length;l++)for(var c=0;c<h.length&&!o;c++)o=calc.getPointOfIntersection(a[l],a[(l+1)%a.length],h[c],h[(c+1)%h.length]);return o},this.getArrPointCircle=function(t,i,e,n,r,s,a){var h,l=calc.getAngle(e,t)-Math.PI,c=calc.getAngle(n,t)-Math.PI;h=a||[new o],r=r||5,!(s=s||!1)&&c<=l?c+=2*Math.PI:s&&l<=c&&(l+=2*Math.PI);var p=s?-1*(l-c):c-l,d=Math.ceil(Math.abs(p)/(2*Math.PI))*(r-1),u=p/(2*d),g=2*u,f=Math.cos(u),P=Math.sin(u),y=d-1,x=y%1/y,v=0,S=0,_=0,w=0,m=0;h[0].x=t.x+Math.cos(l)*i,h[0].y=t.y+Math.sin(l)*i;for(var R=0;R<=y;R++)v=u+l+(g*R+x*R),w=(f*(S=Math.cos(v))+P*(_=-Math.sin(v)))*i+t.x,m=(f*-_+P*S)*i+t.y,h[R+1]?(h[R+1].x=w,h[R+1].y=m):h.push(new o(w,m));return h},this.getLenghtCircle=function(t,i,e,n,r){i||(i=e=n=l);var s=calc.getAngle(e,i)-Math.PI,o=calc.getAngle(n,i)-Math.PI;return s===o&&e!==n?0:(!(r=r||!1)&&o<=s?o+=2*Math.PI:r&&s<=o&&(s+=2*Math.PI),Math.PI*t*(r?s-o:o-s)/Math.PI)},this.getLengthByWidth=function(t,i){var e=new o(0,0),n=new o(t,0),r=calc.getVector(i,.5*Math.PI);r.x=t/2;var s=calc.getCenterCircle(e,n,r);return s?calc.getLenghtCircle(calc.getDistance(s,e),s,e,n,i>0):t},this.getCenterCircle=function(t,i,e){var n=i.x-t.x,r=i.y-t.y,s=e.x-t.x,a=e.y-t.y,h=n*(t.x+i.x)+r*(t.y+i.y),l=s*(t.x+e.x)+a*(t.y+e.y),c=2*(n*(e.y-i.y)-r*(e.x-i.x));return 0===c?null:new o((a*h-r*l)/c,(n*l-s*h)/c)},this.getArcPoint=function(t,i,e,n,r){n=n||5;var s=calc.getAngle(t,i)+90*calc.DEG2RAD,a=calc.getVector(e,s),h=new o((t.x+i.x)/2,(t.y+i.y)/2);h.x+=a.x,h.y+=a.y;var l=calc.getCenterCircle(t,h,i);return l?calc.getArrPointCircle(l,calc.getDistance(l,t),t,i,n,e>0,r):[t,i]},this.getArea=function(t){for(var i=t.length,e=0,n=i-1,r=0;r<i;n=r++)e+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*e||0},this.generateUUID=function(){for(var t=[],i=0;i<256;i++)t[i]=(i<16?"0":"")+i.toString(16);return function(){var i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]+"-"+t[255&e]+t[e>>8&255]+"-"+t[e>>16&15|64]+t[e>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),this.diffNum=function(t,i){return t>=0&&i>=0?Math.abs(t-i):t<=0&&i<=0?Math.abs(Math.abs(t)-Math.abs(i)):t<=0&&i>=0?Math.abs(t)+i:t>=0&&i<=0?t+Math.abs(i):void 0},this.getPercentNum=function(t,i,e){return((t=null!=t?t:0)-(i=null!=i?i:0))/((e=null!=e?e:100)-i)*100},this.getValueNum=function(t,i,e){return(t=null!=t?t:0)/100*((e=null!=e?e:100)-(i=null!=i?i:0))+i},this.getValueBetween=function(t,i,e){var n=Math.max(i,e),r=Math.min(i,e);return Math.max(Math.min(t,n),r)},this.contains=function(t,i,e){for(var n=!1,r=e.length,s=0,o=r-1;s<r;o=s++){if(e[s].x===t&&e[s].y===i)return!0;var a=e[s].x,h=e[s].y,l=e[o].x,c=e[o].y;h>i!=c>i&&t<(l-a)*(i-h)/(c-h)+a&&(n=!n)}return n};var C={maxX:0,minX:0,maxY:0,minY:0},D=new o,I=[new o,new o,new o,new o],L=new o;this.getBoundsRect=function(t,i){L.set(t.width/2,t.height/2),I[0].set(0,0),I[1].set(t.width,0),I[2].set(t.width,t.height),I[3].set(0,t.height);for(var e=0;e<I.length;e++)this.rotationPoint(I[e],i,L);C.maxX=-t.width,C.minX=t.width,C.maxY=-t.height,C.minY=t.height;for(e=0;e<I.length;e++)C.maxX=Math.max(C.maxX,I[e].x),C.minX=Math.min(C.minX,I[e].x),C.maxY=Math.max(C.maxY,I[e].y),C.minY=Math.min(C.minY,I[e].y);return D.x=C.minX,D.y=C.minY,D.width=C.maxX-C.minX,D.height=C.maxY-C.minY,D},this.getCurvatureByWidth=function(t,i){if(Math.abs(t)>2*i)return null;var e=Math.pow(Math.abs(t),2),n=Math.pow(i,2),r=Math.acos((n+n-e)/(2*n));return i*(1-Math.cos(r/2))*(t<0?-1:1)},this.getWidthByCurvature=function(t,i){return 2*i*Math.sin(Math.acos(1-2*Math.abs(t)/(2*i)))*(t<0?-1:1)};function k(t){return t!==Object(t)}this.compare=function t(i,e){if(k(i)&&k(e))return i===e;for(var r in i){if(i.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;switch(n(i[r])){case"object":if(!t(i[r],e[r]))return!1;break;case"function":if(void 0===e[r]||"compare"!==r&&i[r].toString()!==e[r].toString())return!1;break;case"number":if(Number(Number(i[r]).toFixed(3))!==Number(Number(e[r]).toFixed(3)))return!1;break;default:if(i[r]!==e[r])return!1}}for(var r in e)if(i.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;return!0}}function s(t,i){this.p=t||new o,this.p1=i||new o,this.p2=new o,this.status=0,this.perpendik=!0,this.angel=0,this.set=function(t,i){this.p=t||0,this.p1=i||0}}function o(t,i,e){this._x=t||0,this._y=i||0,this._z=e||0,this.set=function(t,i,e){this._x=t||0,this._y=i||0,void 0!==e&&(this._z=e)},this.setPoint=function(t){this._x=t.x,this._y=t.y,void 0!==t.z&&(this._z=t.z)},this.getObj=function(){var t={};return t.x=this._x,t.y=this._y,t.z=this._z,t},this.copy=function(){return new o(this._x,this._y,this._z)}}function a(t,i,e,n){this._x=t||0,this._y=i||0,this._z="function"!=typeof e&&e||0,this.fun="function"==typeof e?e:n,this.set=function(t,i,e){this._x=t||0,this._y=i||0,this._z=e||0,this.fun&&this.fun()},this.setPoint=function(t){this._x=t.x,this._y=t.y,this._z=t.z,this.fun&&this.fun()},this.getObj=function(){var t={};return t.x=this._x,t.y=this._y,t.z=this._z,t},this.copy=function(){return new a(this._x,this._y,this._z)}}function h(t,i,e,n,r){this._x=t||0,this._y=i||0,this._width=void 0!==e?e:100,this._height=void 0!==n?n:100,this.angel=0,this.p=new o,this.fun,this.set=function(t,i,e,n){this._x=t||0,this._y=i||0,this._width=void 0!==e?e:100,this._height=void 0!==n?n:100},this.setRect=function(t){this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.p.setPoint(t.p),this.angel=t.angel}}e.d(i,"a",function(){return r}),e.d(i,"b",function(){return s}),e.d(i,"c",function(){return o}),e.d(i,"d",function(){return a}),e.d(i,"e",function(){return h}),o.prototype={set x(t){this._x=t},get x(){return this._x},set y(t){this._y=t},get y(){return this._y},set z(t){this._z=t},get z(){return this._z}},a.prototype={set x(t){this._x=t,this.fun&&this.fun()},get x(){return this._x},set y(t){this._y=t,this.fun&&this.fun()},get y(){return this._y},set z(t){this._z=t,this.fun&&this.fun()},get z(){return this._z}},h.prototype={set x(t){this._x!==t&&(this._x=t)},get x(){return this._x},set y(t){this._y!==t&&(this._y=t)},get y(){return this._y},set width(t){this._width!==t&&(this._width=t)},get width(){return this._width},set height(t){this._height!==t&&(this._height=t)},get height(){return this._height}}},function(t,i,e){"use strict";function n(t){var i=this;this.type="SpPoint",this.tipe="SpPoint",this.stage=t,this._life=!0,this.size2=10,this.size3=.001,this._uuid=calc.generateUUID(),this.arrSHronBaza=[],this.arrSHron=[],this.arrPol=[],this.arrIdSten=[],this.arrSten=[],this.arrayClass=[];var e,n,s=0;function o(t,i){if(t)for(var e=0;e<t.arrSHron.length;e++)i.push(t.arrSHron[e].sten)}function a(t,i){if(t)for(var e=0;e<t.arrSHron.length;e++)t.arrSHron[e].sten._addPoint&&i.push(t.arrSHron[e].sten._addPoint),t.arrSHron[e].sten._addPoint1&&i.push(t.arrSHron[e].sten._addPoint1)}function h(t){for(var i=0;i<t.length;i++){for(var e=!1,n=0;n<t.length;n++)if(i!==n&&t[n].uuid===t[i].uuid){e=!0;break}e&&t.splice(i--,1)}}this.creatSHron=function(){for(var t=0;t<this.arrSHronBaza.length;t++)if(0==this.arrSHronBaza[t].life)return this.arrSHronBaza[t].life=!0,this.arrSHronBaza[t];return this.arrSHronBaza.push(new r(this)),this.arrSHronBaza[this.arrSHronBaza.length-1]},this.addSplice=function(t,r){n=99999;for(var s=0;s<this.arrSHron.length;s++)this.arrSHron[s].sten.idArr==t.idArr&&(n=s);99999==n&&((e=this.creatSHron()).sten=t,e.storona=r,this.arrSHron.push(e),i.arrIdSten.push(t.idArr),1==r?t.addPoint=this:t.addPoint1=this,this.life=!0,this.drag()),this.stage.render()},this.removeSplice=function(t){n=-1;for(var i=0;i<this.arrSHron.length;i++)this.arrSHron[i].sten.idArr==t.idArr&&(n=i);if(-1!=n){var e=this.arrSHron[n];return this.arrSHron.splice(n,1),e.clear(),this.arrIdSten.splice(n,1),this.drag(),e}return this.stage.render(),null},this.addPol=function(t){this.arrPol.push(t),this.stage.render()},this.removePol=function(t){for(var i=null,e=0;e<this.arrPol.length;e++)t.idArr==this.arrPol[e].idArr&&(this.arrPol.splice(e,1),null==i&&(i=0),i++,t.removePoint(this),e=0);return 0==this.arrSHron.length&&0==this.arrPol.length&&this.clear(),this.stage.render(),i},this._heightNew=0,this.dragHeight,this.drag=function(){s=this.arrSHron.length;for(var t=0;t<s;t++)this.arrSHron[t].sten.calculateOld=this.arrSHron[t].sten.calculate,this.arrSHron[t].sten.calculate=!0,this.arrSHron[t].sten.height>this._heightNew&&(this._heightNew=this.arrSHron[t].sten.height);this.setPointNotDrag(this.position);for(var i=this.getConectedPoint(),e=0;e<i.length;e++)i[e].korektSH();this.dragView();for(t=0;t<s;t++)this.arrSHron[t].sten.calculate=this.arrSHron[t].sten.calculateOld,this.arrSHron[t].sten.drag();for(e=0;e<this.arrPol.length;e++)this.arrPol[e].drag(),this.arrPol[e].height>this._heightNew&&(this._heightNew=this.arrPol[e].height);this.dragHeight&&this.dragGG(),this.stage.render()},this.dragGG=function(){this._heightNew=0;for(var t=0;t<s;t++)this.arrSHron[t].sten.height>this._heightNew&&(this._heightNew=this.arrSHron[t].sten.height);for(var i=0;i<this.arrPol.length;i++)this.arrPol[i].height>this._heightNew&&(this._heightNew=this.arrPol[i].height);this.dragHeight&&this.dragHeight()},this.dragView=function(){for(var t=0;t<this.arrayClass.length;t++)this.arrayClass[t].drag&&this.arrayClass[t].drag()};var l=!1;this.korektSH=function(){if(!l){l=!0,f(!0);for(var t=0;t<this.arrSHron.length;t++)this.arrSHron[t].korektAngel();this.arrSHron.sort(P);for(t=0;t<this.arrSHron.length;t++)this.stage.spCalc.korektSHObject(this,t);f(!1),l=!1}};var c,p,d,u,g=null;function f(t){if(t)g=i.arrSHron.slice(),i.arrSHron=i.arrSHron.filter(function(t){var i=0===t.sten.tip?t.sten._delph/2:t.sten._delph;return t.sten.visible=t.sten._distans>i,t.sten.visible});else{i.arrSHron=g;for(var e=0;e<i.arrSHron.length;e++){var n=0===i.arrSHron[e].sten.tip?i.arrSHron[e].sten._delph/2:i.arrSHron[e].sten._delph;i.arrSHron[e].sten.visible=i.arrSHron[e].sten._distans>n}g=null}}function P(t,i){return t.rotation-i.rotation}this.setPointNotDrag=function(t){s=i.arrSHron.length,i.position._x=t.x,i.position._y=t.y;for(var e=0;e<s;e++){var n=i.arrSHron[e].sten.calculate;i.arrSHron[e].sten.calculate=!0,1==i.arrSHron[e].storona?(i.arrSHron[e].sten.position._x=t.x,i.arrSHron[e].sten.position._y=t.y):(i.arrSHron[e].sten.position1._x=t.x,i.arrSHron[e].sten.position1._y=t.y),i.arrSHron[e].sten.drag(),i.arrSHron[e].sten.calculate=n}},this.getConectedPoint=function(t){t=t||[this];for(var i=[],e=0;e<t.length;e++)a(t[e],i);return h(i),i},this.getConectedSten=function(t){t=t||[this];for(var i=[],e=0;e<t.length;e++)o(t[e],i);return h(i),i},this.dragVokrug=function(){for(var t=this.getConectedPoint(),i=this.getConectedSten(t),e=0;e<t.length;e++)t[e].korektSH(),t[e].dragView();for(e=0;e<i.length;e++)i[e].drag()},this.drawposit=function(){i.calculate||i.drag()},this.position=new PositionFun(0,0,this.drawposit),this.restart=function(){},this.clear=function(){if(this.life){if(2==this.arrSHron.length){this.arrStep=[];var t=this.stage.spCalc.getSten2AddPoint(this.arrSHron[0].sten,this),i=this.stage.spCalc.getSten2AddPoint(this.arrSHron[1].sten,this);if(-1!=this.getClonSten(-1,t,i))e=this.removeSplice(this.arrSHron[1].sten),n=this.removeSplice(this.arrSHron[0].sten),e.sten.clear(),n.sten.clear();else{t=this.arrSHron[0].sten._addPoint.idArr==this.idArr?this.arrSHron[0].sten._addPoint1:this.arrSHron[0].sten._addPoint;var e=this.removeSplice(this.arrSHron[1].sten),n=this.removeSplice(this.arrSHron[0].sten);e.sten._addPoint.idArr==this.idArr?(t.addSplice(e.sten,!0),1===e.sten.tip&&1===n.sten.tip&&e.sten.lineRange.p2.setPoint(n.sten._addPoint1.position)):(t.addSplice(e.sten,!1),1===e.sten.tip&&1===n.sten.tip&&e.sten.lineRange.p2.setPoint(n.sten._addPoint.position)),e.sten.addPoint1.drag(),e.sten.addPoint.drag(),this.life=!1,n.sten.clear()}}else{this.arrStep=[];for(var r=this.arrSHron.length-1;r>=0;r--){null!=(n=this.removeSplice(this.arrSHron[r].sten)).sten&&(n.sten.addPoint.idArr!=this.idArr&&n.sten.addPoint1.idArr!=this.idArr||(n.life=!1,n.sten.clear()))}}for(var s=0;s<this.arrayClass.length;s++)"function"==typeof this.arrayClass[s].clear&&this.arrayClass[s].clear();for(r=0;r<this.arrPol.length;r++)this.arrPol[r]&&this.removePol(this.arrPol[r]);this.life=!1,this.stage.render()}},this.clearFree=function(){0==this.arrSHron.length&&0==this.arrPol.length&&this.clear()},this.getClonSten=function(t,i,e){if(i&&e)for(var n=0;n<this.stage.arrSplice.length;n++){var r=this.stage.arrSplice[n];if(r.life&&(r.idArr!==t&&r.addPoint&&r.addPoint1)){if(r.addPoint.idArr===i.idArr&&r.addPoint1.idArr===e.idArr)return n;if(r.addPoint1.idArr===i.idArr&&r.addPoint.idArr===e.idArr)return n}}return-1},this.slitie=function(t){if(0!=this.life&&0!=t.life){for(var i=null,e=t.arrSHron.length-1;e>=0;e--)for(var n=0;n<this.arrSHron.length;n++)if(this.arrSHron[n].sten.idArr==t.arrSHron[e].sten.idArr&&this.arrSHron[n].sten._distans<2){i=this.arrSHron[n].sten;break}if(i){var r={};for(e=t.arrSHron.length-1;e>=0;e--)i.idArr==t.arrSHron[e].sten.idArr&&(r.sten=t.arrSHron[e].sten,r.storona=t.arrSHron[e].storona);t.removeSplice(i);for(e=this.arrSHron.length-1;e>=0;e--)i.idArr==this.arrSHron[e].sten.idArr&&(r.sten=this.arrSHron[e].sten,r.storona=this.arrSHron[e].storona);this.removeSplice(i)}var s=[];for(e=t.arrSHron.length-1;e>=0;e--)s.push(t.arrSHron[e]);for(e=0;e<s.length;e++)t.removeSplice(s[e].sten);for(e=0;e<s.length;e++)this.addSplice(s[e].sten,s[e].storona);i&&i.clear(),t.clear()}},this.arrDistRadom=[],this.miniDist=-1,this.miniId=-1,this.miniOkSlit=-1,this.testDistRadom=function(t){this.arrDistRadom=[],this.miniDist=1e17,this.miniId=-1,this.miniOkSlit=-1;for(var i=0;i<this.stage.arrPoint.length;i++){if(t){for(var e=!1,n=0;n<t.length;n++)if(t[n].idArr==this.stage.arrPoint[i].idArr){e=!0;break}if(e)continue}this.idArr==i?this.arrDistRadom.push(-1):0==this.stage.arrPoint[i].life?this.arrDistRadom.push(-1):(this.arrDistRadom.push(calc.getDistance(this.position,this.stage.arrPoint[i].position)),this.miniDist>this.arrDistRadom[this.arrDistRadom.length-1]&&(this.miniDist=this.arrDistRadom[this.arrDistRadom.length-1],this.miniId=i,this.miniDist<aidPointStatic.radius&&(this.miniOkSlit=i)))}},this.isGroup=function(t){for(var i=0;i<this.arrSHron.length;i++){if(this.arrSHron[i].sten.addPoint&&this.arrSHron[i].sten.addPoint.idArr==this.idArr&&this.arrSHron[i].sten.addPoint1&&this.arrSHron[i].sten.addPoint1.idArr==t)return!0;if(this.arrSHron[i].sten.addPoint1&&this.arrSHron[i].sten.addPoint1.idArr==this.idArr&&this.arrSHron[i].sten.addPoint&&this.arrSHron[i].sten.addPoint.idArr==t)return!0}return!1},this.finaldrag=function(){for(var t=this.arrSHron.slice(),i=t.length-1;i>=0;i--)for(var e=0;e<this.arrSHron.length;e++)if(this.arrSHron[e].sten.idArr==t[i].sten.idArr){t[i].sten.life&&this.stage.korektSplice.paralelSten(t[i].sten);break}},this.rectangle=new Rectangle,this.getRect=function(){return this.rectangle.x=this.position.x-10,this.rectangle.y=this.position.y-10,this.rectangle.width=20,this.rectangle.height=20,this.rectangle},this.compare=function(t){return c=!0,p=this.getObj(),d=t,calc.getDistance(p.position,d.position)>.1&&(c=!1),c},this.rememberState=function(){(u=this.getObj()).life=this.life},this.saveChanges=function(){u&&(!this.compare(u)||(this.life,u.life)),u=null};var y=new Rectangle(-1/0,-1/0,1/0,1/0);this.getBoundRect=function(){return y.x=this.position.x-this.size3,y.y=this.position.y-this.size3,y.width=2*this.size3,y.height=2*this.size3,y}}function r(t){this.life=!0,this.sten=void 0,this.storona=!0,this.aidPoint=t,this.rotation=0,this.bp=0,this.bp1=0,this.linePosition=new LinePosition,this.korektAngel=function(){this.linePosition.p.setPoint(this.aidPoint.position),1==this.storona?this.linePosition.p1.setPoint(this.sten.position1):this.linePosition.p1.setPoint(this.sten.position),this.linePosition.angel=calc.getAngle(this.linePosition.p,this.linePosition.p1),this.rotation=this.linePosition.angel+Math.PI},this.clear=function(){this.life=!1}}e.d(i,"a",function(){return n}),n.prototype={set uuid(t){this._uuid!==t&&(this.funUpdateUuid&&this.funUpdateUuid(this._uuid,t),this._uuid=t)},get uuid(){return this._uuid},getObj:function(){var t={};return t.type=this.type,t.idArr=this.idArr,t.position=this.position.getObj(),t},setObj:function(t){this.position.setPoint(t.position)},restart:function(t){},set life(t){if(this._life!=t){this._life=t;for(var i=0;i<this.arrayClass.length;i++)null!=this.arrayClass[i].life&&(this.arrayClass[i].life=this._life)}},get life(){return this._life}}},function(t,i,e){"use strict";e.d(i,"a",function(){return o});var n=e(1),r=e(0);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){var i,e,s,o=this;this.type="Splice",this.tipe="Splice",this.stage=t,this.idArr=-1,this._life=!0,this._delph=20,this.delphMin=5,this.delphMax=100,this._tip=0,this.arrOpor=[],this._uuid=t.spCalc.generateUUID(),this.arrayClass=[],this.arrPosit=[new r.c,new r.c,new r.c,new r.c,new r.c,new r.c],this.arrPosit1=[new r.c,new r.c,new r.c,new r.c,new r.c,new r.c],this.bolPosit=!1,this.bolPosit1=!1,this._addPoint,this._addPoint1,this._rotation=0,this._distans=0,this._oporPointVisi=!0,this.rectangle=new r.e,this.drawposit=function(){o.drag()},this.position=new r.d(0,0,this.drawposit),this.position1=new r.d(0,0,this.drawposit),this._distans0=0,this._distans1=0,this.dL0=0,this.dL1=0,this.dR0=0,this.dR1=0,this.updateDistans01=function(){if(1===this.tip){this.lineRange.korectPoint2(this._delph/2,this.arrPosit[5],this.arrPosit1[5]),this._distans0=0;for(var t=1;t<this.lineRange.sahAngel;t++)this._distans0+=calc.getDistance(this.lineRange.arrPosit[t-1],this.lineRange.arrPosit[t]);this.lineRange.korectPoint2(this._delph/2,this.arrPosit[0],this.arrPosit1[0]),this._distans1=0;for(t=1;t<this.lineRange.sahAngel;t++)this._distans1+=calc.getDistance(this.lineRange.arrPosit[t-1],this.lineRange.arrPosit[t])}else this.dL0=this.arrPosit[0].x,this.dL0<this.arrPosit[1].x&&(this.dL0=this.arrPosit[1].x),this.dL1=this.arrPosit1[5].x,this.dL1<this.arrPosit1[4].x&&(this.dL1=this.arrPosit1[4].x),this.dR0=this.arrPosit[5].x,this.dR0<this.arrPosit[4].x&&(this.dR0=this.arrPosit[4].x),this.dR1=this.arrPosit1[0].x,this.dR1<this.arrPosit1[1].x&&(this.dR1=this.arrPosit1[1].x),this._distans0=this._distans+this.dL0+this.dL1,this._distans1=this._distans+this.dR0+this.dR1},this.clear=function(){this.arrState.length=0,this.addPoint&&(this.addPoint.removeSplice(this),this.addPoint.clearFree()),this.addPoint1&&(this.addPoint1.removeSplice(this),this.addPoint1.clearFree()),this.addPoint=void 0,this.addPoint1=void 0,a("clear"),this.life=!1,this.stage.render()};function a(t,i,e,n,r){for(var s=0;s<o.arrayClass.length;s++)"function"==typeof o.arrayClass[s][t]&&o.arrayClass[s][t](i,e,n,r)}this.dividedSten=function(t,r){if(!t||t instanceof n.a){if(t&&0==t.life)return t;if(null==t){var o=position2dFlor.getLocalIsStage();0==this._tip?(h=calc.isPointInLin(this.position,this.position1,o,9e6,9e6),(t=this.stage.craetPoint()).position.x=h.x,t.position.y=h.y):1==this._tip&&((t=this.stage.craetPoint()).position.x=o.x,t.position.y=o.y,s=this.isPointInLin(t.position),t.position.x=s.x,t.position.y=s.y)}if(a("beforDivid"),0==this._tip)(i=this.addPoint1).removeSplice(this),t.addSplice(this,!1),(e=this.stage.craetSplice()).setSten(this),t.addSplice(e,!0),i.addSplice(e,!1),t.drag();else if(1==this._tip){var l=this.lineRange.getLR(t.position,0),c=this.lineRange.getLR(t.position,1);(i=this.addPoint1).removeSplice(this),t.addSplice(this,!1),this.lineRange.setLR(l),(e=this.stage.craetSplice()).setSten(this),t.addSplice(e,!0),i.addSplice(e,!1),e.lineRange.setLR(c),t.position.x+=1e-6,t.dragVokrug()}return a("afterDivid",e),this.stage.render(),1==r?e:t}},this.restartTip=function(){1==this._tip&&(this.lineRange||(this.lineRange=new LineRange(40)),0==this.arrOpor.length&&this.arrOpor.push(new r.c),this.lineRange.p.setPoint(this.position),this.lineRange.p1.setPoint(this.position1),this.lineRange.upDate(),this.arrOpor[0].setPoint(this.lineRange.p2)),2==this._tip&&(this.arrOpor[0]||(this.arrOpor[0]=new r.c),this.arrOpor[1]||(this.arrOpor[1]=new r.c))},this._setAllParam=function(t,i){for(var e=0;e<o.arrayClass.length;e++)t in o.arrayClass[e]&&(o.arrayClass[e][t]=i)},this._callAllFun=a,this.isPointInLin=function(t,i,e,n){i=void 0===i?9e6:i,e=void 0===e?9e6:e;var s=null;if(0==this._tip)if(n){s=calc.isPointInLin(this.position,this.position1,t,i,0);var o=new r.c;o.setPoint(t),s&&o.setPoint(s),s||(s=calc.getDistance(this.position,o)<calc.getDistance(this.position1,o)?this.position:this.position1)}else s=calc.isPointInLin(this.position,this.position1,t,i,e);else 1==this._tip?s=this.lineRange.getPointInLineRange(t,i,e,n):window.console.warn("хз как isPointInLin",this._tip);return a("isPointInLin",t,i,e,s),s},this.getBoundRect=this.getRect=function(){if(this.rectangle.x=1/0,this.rectangle.y=1/0,this.rectangle.width=-1/0,this.rectangle.height=-1/0,0==this._tip){for(var t=0;t<this.arrPosit.length;t++)x(-this.arrPosit[t].x,this.arrPosit[t].y,!1);for(t=0;t<this.arrPosit1.length;t++)x(this.arrPosit1[t].x+this._distans,this.arrPosit1[t].y,!1)}else if(1==this._tip){this.lineRange.korectPoint2(this._delph/2),x(this.lineRange.arrPosit[0].x,this.lineRange.arrPosit[0].y,!0);for(t=1;t<this.lineRange.sahAngel;t++)x(this.lineRange.arrPosit[t].x,this.lineRange.arrPosit[t].y,!0);for(1==this.bolPosit1&&(x(this.arrPosit1[4].x,this.arrPosit1[4].y,!0),x(this.arrPosit1[3].x,this.arrPosit1[3].y,!0),x(this.arrPosit1[2].x,this.arrPosit1[2].y,!0),x(this.arrPosit1[1].x,this.arrPosit1[1].y,!0),x(this.arrPosit1[0].x,this.arrPosit1[0].y,!0)),this.lineRange.korectPoint2(-this._delph/2),t=this.lineRange.sahAngel-1;t>=0;t--)x(this.lineRange.arrPosit[t].x,this.lineRange.arrPosit[t].y,!0);1==this.bolPosit&&(x(this.arrPosit[0].x,this.arrPosit[0].y,!0),x(this.arrPosit[1].x,this.arrPosit[1].y,!0),x(this.arrPosit[2].x,this.arrPosit[2].y,!0),x(this.arrPosit[3].x,this.arrPosit[3].y,!0),x(this.arrPosit[4].x,this.arrPosit[4].y,!0))}else window.console.warn("хз как getRect",this._tip);return this.rectangle.width=this.rectangle.width-this.rectangle.x,this.rectangle.height=this.rectangle.height-this.rectangle.y,a("getRect",this.rectangle),this.rectangle},this.isColLine=function(t,i){if(0==this._tip)return calc.getPointOfIntersection(this.position,this.position1,t,i);if(1==this._tip){this.lineRange.korectPoint2(0);for(var e=1;e<this.lineRange.sahAngel-1;e++)if(calc.getPointOfIntersection(this.lineRange.arrPosit[e],this.lineRange.arrPosit[e+1],t,i))return!0}else window.console.warn("хз как isColLine",this._tip);return!1};var h,l=[new r.c,new r.c,new r.c,new r.c];this.isColRect=function(t){if(l[0].set(t.x,t.y),l[1].set(t.x+t.width,t.y),l[2].set(t.x+t.width,t.y+t.height),l[3].set(t.x,t.y+t.height),calc.isInTriangle(l[0],l[1],l[2],this.position))return!0;if(calc.isInTriangle(l[0],l[3],l[2],this.position))return!0;if(calc.isInTriangle(l[0],l[1],l[2],this.position1))return!0;if(calc.isInTriangle(l[0],l[3],l[2],this.position1))return!0;for(var i=0;i<l.length;i++)if(this.isColLine(l[i],l[(i+1)%l.length]))return!0;return!1},this.arrState=[],this.rememberState=function(){this.startObj=this.getObj(),calc.compare(this.startObj,this.arrState[this.arrState.length-1]||{})||this.arrState.push(this.startObj)},this.getLastState=function(){return this.arrState.pop()},this.saveChanges=function(){return h=!1},this.compareLastState=function(){};var c,p,d,u,g,f=new r.c,P=new r.c,y=new r.c;function x(t,i,e){0==e?(f.x=t,f.y=i,d=calc.getDistance(y,f),u=calc.getAngle(y,f),g=u+o._rotation,calc.getVector(d,g,P),P.x+=o.position.x,P.y+=o.position.y,c=P.x,p=P.y):(c=t,p=i),o.rectangle.x=Math.min(o.rectangle.x,c),o.rectangle.y=Math.min(o.rectangle.y,p),o.rectangle.width=Math.max(o.rectangle.width,c),o.rectangle.height=Math.max(o.rectangle.height,p)}function v(t,i){if(t)for(var e=0;e<t.arrSHron.length;e++)t.arrSHron[e].sten._addPoint&&i.push(t.arrSHron[e].sten._addPoint),t.arrSHron[e].sten._addPoint1&&i.push(t.arrSHron[e].sten._addPoint1)}function S(t,i){if(t)for(var e=0;e<t.arrSHron.length;e++)i.push(t.arrSHron[e].sten)}function _(t){for(var i=0;i<t.length;i++){for(var e=!1,n=0;n<t.length;n++)if(i!==n&&t[n].uuid===t[i].uuid){e=!0;break}e&&t.splice(i--,1)}}function w(t){for(var i=[],e=0;e<t.arrSHron.length;e++){var n=t.arrSHron[e].sten;i.push(n.uuid)}return i}this.dragVokrug=function(){var t=[],i=[];v(this._addPoint,t),v(this._addPoint1,t),_(t);for(var e=0;e<t.length;e++)S(t[e],i);_(i);for(e=0;e<i.length;e++)i[e].calculate=!0;for(e=0;e<t.length;e++)t[e].drag();for(e=0;e<t.length;e++)t[e].drag();for(e=0;e<i.length;e++)i[e].calculate=!1,i[e].drag()},this.getArrConectedSplice=function(){var t={};return t.arr=w(this.addPoint),t.arr1=w(this.addPoint1),t}}o.prototype={set uuid(t){this._uuid!==t&&(this.funUpdateUuid&&this.funUpdateUuid(this._uuid,t),this._uuid=t)},get uuid(){return this._uuid},getObj:function(){var t={};if(t.type=this.type,t.idArr=this.idArr,t.delph=this.delph,t.tip=this.tip,t.position=this.addPoint?this.addPoint.position.getObj():this.position.getObj(),t.position1=this.addPoint1?this.addPoint1.position.getObj():this.position1.getObj(),t.connected=this.getArrConectedSplice(),this.lineRange&&(t.position2=this.lineRange.p2.getObj()),0!=this.tip){t.arrOpor=[];for(var i=0;i<this.arrOpor.length;i++)t.arrOpor.push({x:this.arrOpor[i].x,y:this.arrOpor[i].y})}return t.uuid=this.uuid,t},setObj:function(t){if(void 0!==t.uuid&&(this.uuid=t.uuid),this.clear(),void 0!==t.delph&&(this._delph=t.delph),void 0!==t.position&&this.position.setPoint(t.position),void 0!==t.position1&&this.position1.setPoint(t.position1),void 0!==t.connected&&(this.connected=t.connected),this.stage.stenInPoint(this),void 0!==t.curve&&(this.tip=t.curve?1:0),void 0!==t.tip&&(this.tip=t.tip),t.position2&&1===this.tip&&(this.lineRange.setTwoPoint(this.position,this.position1),this.lineRange.setCurvFromPoint(t.position2)),null!=t.arrOpor)for(var i=0;i<t.arrOpor.length;i++)this.arrOpor[i]||(this.arrOpor[i]=new r.c),this.arrOpor[i].set(t.arrOpor[i].x,t.arrOpor[i].y);null!=this._addPoint&&this._addPoint.drag(),null!=this._addPoint1&&this._addPoint1.drag(),this.life=!0,this.drag()},setSten:function(t){void 0!==t.tip&&(this.tip=t.tip),void 0!==t.lineRange&&void 0!==this.lineRange&&this.lineRange.setLR(t.lineRange),void 0!==t.position&&this.position.setPoint(t.position),void 0!==t.position1&&this.position1.setPoint(t.position1),void 0!==t.delph&&(this.delph=t.delph)},restart:function(t){},compare:function(t,i){return rez=!0,s1=t.getObj(),s2=i,t.delph!=s2.delph&&(rez=!1),calc.getDistance(s1.position,s2.position)>.1&&(rez=!1),s1.position2&&s2.position2&&calc.getDistance(s1.position2,s2.position2)>.1&&(rez=!1),t.tip!=s2.tip&&(rez=!1),rez},drag:function(){this._rotation=this.stage.spCalc.getAngle(this.position,this.position1),this._distans=this.stage.spCalc.getDistance(this.position,this.position1),1==this.tip&&(this.lineRange.p.setPoint(this.position),this.lineRange.p1.setPoint(this.position1),this.lineRange.upDate(),this.arrOpor[0].set(this.lineRange.pint90.x,this.lineRange.pint90.y)),this.calculate||(this._callAllFun("drag"),this.funDragOne&&this.funDragOne())},clone:function(t){var i=this.stage.craetSplice(),e=this.stage.craetPoint(),n=this.stage.craetPoint();e.position.set(this.position.x,this.position.y),n.position.set(this.position1.x,this.position1.y);var r=this.getObj();return function t(i){void 0!==i.uuid&&(i.uuid=calc.generateUUID());for(var e in i)"object"===s(i[e])&&t(i[e])}(r),r.uuid=i.uuid,i.setObj(r),i.addPoint.removeSplice(i),i.addPoint1.removeSplice(i),e.addSplice(i,!0),n.addSplice(i,!1),t&&(e.position.x+=t.x,e.position.y+=t.y,n.position.x+=t.x,n.position.y+=t.y),i},set addPoint(t){this._addPoint!=t&&(this._addPoint=t,null!=this._addPoint1&&null!=this._addPoint&&this._addPoint1.idArr==this._addPoint.idArr&&this.clear())},get addPoint(){return this._addPoint},set addPoint1(t){this._addPoint1!=t&&(this._addPoint1=t,null!=this._addPoint&&null!=this._addPoint1&&this._addPoint.idArr==this._addPoint1.idArr&&this.clear())},get addPoint1(){return this._addPoint1},set delph(t){this._delph!=t&&(this._delph=t,this._delph=Math.min(Math.max(this.delphMin,this._delph)||this._delph,this.delphMax)||Math.max(this.delphMin,this._delph)||this._delph,this._setAllParam("delph",this._delph),null!=this._addPoint&&this._addPoint.drag(),null!=this._addPoint1&&this._addPoint1.drag())},get delph(){return this._delph},set tip(t){this._tip!=t&&(this._tip=t,this.calculate=!0,this.restartTip(),this._setAllParam("tip",this._tip),null!=this._addPoint&&this._addPoint.drag(),null!=this._addPoint1&&this._addPoint1.drag(),this.calculate=!1,this.drag())},get tip(){return this._tip},set life(t){this._life!=t&&(this._life=t,this._setAllParam("life",this._life))},get life(){return this._life},set activMouse(t){this._activMouse!=t&&(this._activMouse=t,this._setAllParam("activMouse",this._activMouse))},get activMouse(){return this._activMouse},set oporPointVisi(t){this._oporPointVisi!=t&&(this._oporPointVisi=t,this._setAllParam("oporPointVisi",this._oporPointVisi))},get oporPointVisi(){return this._oporPointVisi},set distans0(t){if(this._distans0!==t){var i=this.position.copy(),e=this.position1.copy();calc.korektToLine(i,e,(t-this._distans0)/2,0),this.addPoint&&(this.addPoint.position.setPoint(i),this.addPoint1.position.setPoint(e),this.addPoint.dragVokrug(),this.addPoint1.dragVokrug())}},get distans0(){return this.updateDistans01(),this._distans0},set distans1(t){if(this._distans1!==t){var i=this.position.copy(),e=this.position1.copy();calc.korektToLine(i,e,(t-this._distans1)/2,0),this.addPoint&&(this.addPoint.position.setPoint(i),this.addPoint1.position.setPoint(e),this.addPoint.dragVokrug(),this.addPoint1.dragVokrug())}},get distans1(){return this.updateDistans01(),this._distans1},set visible(t){this._visible!==t&&(this._visible=t,this._setAllParam("visible",this._visible))},get visible(){return this._visible}}},function(t,i,e){"use strict";function n(t){this.type="SpPol",this.tipe="SpPol",this.stage=t,this.par=t,this._life=!0,this.idArr=-1,this._uuid=calc.generateUUID(),this.array=[];this.addPoint=function(t,i){var e=this.array.length;null!=i&&i<e&&(e=i),this.array.splice(e,0,t),t.addPol(this),this.drag(),this.stage.render()},this.removePoint=function(t){for(var i=0,e=0;e<this.array.length;e++)this.array[e].idArr==t.idArr&&(e,this.array.splice(e,1),t.removePol(this),i++);return 0!=i&&(this.drag(),this.testKill()),this.stage.render(),i},this.drag=function(){},this.clear=function(){for(var t=this.array.length-1;t>=0;t--)this.array[t]&&this.array[t].removePol(this);this.life=!1,this.stage.render()},this.testKill=function(){this.array.length<=1&&this.clear()}}e.d(i,"a",function(){return n}),n.prototype={set uuid(t){this._uuid},get uuid(){return this._uuid},getObj:function(){for(var t={array:[]},i=0;i<this.array.length;i++)t.array.push({x:this.array[i].position.x,y:this.array[i].position.y});return t},setObj:function(t){for(var i=0;i<t.array.length;i++){var e=this.stage.getPointXY(t.array[i]);this.addPoint(e)}this.drag()},set life(t){this._life!=t&&(this._life=t)},get life(){return this._life}}},function(t,i,e){"use strict";(function(t){e.d(i,"a",function(){return c});var n=e(6),r=e(8),s=e(7),o=e(2),a=e(3),h=e(1),l=e(0);function c(){var i=this;this.type="SpStage",this._delph=20,this.tipPoint="SpPoint",this.tipSplice="Splice",this.arrSplice=[],this.arrPoint=[],this.arrPol=[],this.arrayClass=[],this.arrCreat=[],this.arrClear=[],this.arrClearState=[],this.objBase=void 0,this.configData={delph:20},this.spUtility=new n.a,this.spCalc=new r.b,t.calc=new l.a,t.PositionFun=l.d,t.Position=l.c,t.Rectangle=l.e,t.LinePosition=l.b,this.korektSplice=new s.a(this),this._activMouse=!0,this._pointVisi=!0,this._oporPointVisi=!0,this._visiDimensioOnObj=!1,this.hesh={},this.getPoint=function(){return new h.a(this)},this.getSplice=function(){return new o.a(this)},this.getPol=function(){return new a.a(this)},this.funUpdateUuid=function(t,e){i.hesh[t]&&(i.hesh[t]!==this&&window.console.error("",i.hesh[t],this),delete i.hesh[t]),i.hesh[e]&&(i.hesh[e]!==this&&window.console.error("этот uuid уже испольузутся",i.hesh[e],this),delete i.hesh[t]),i.hesh[e]=this}}c.prototype={craetPoint:function(){for(var t=0;t<this.arrPoint.length;t++)if(0==this.arrPoint[t].life)return this.arrPoint[t].life=!0,this.arrPoint[t];var i=this.getPoint();return this.arrPoint.push(i),this.arrPoint[this.arrPoint.length-1].idArr=this.arrPoint.length-1,this.arrPoint[this.arrPoint.length-1]},craetSplice1:function(){for(var t=0;t<this.arrSplice.length;t++)if(0==this.arrSplice[t].life)return this.arrSplice[t].life=!0,this.arrSplice[t].delph=this._delph,this.arrSplice[t];var i=this.getSplice();return this.arrSplice.push(i),this.arrSplice[this.arrSplice.length-1].idArr=this.arrSplice.length-1,this.arrSplice[this.arrSplice.length-1].funUpdateUuid=this.funUpdateUuid,this.arrSplice[this.arrSplice.length-1].restart(),this.arrSplice[this.arrSplice.length-1].delph=this._delph,this.hesh[this.arrSplice[this.arrSplice.length-1].uuid]=this.arrSplice[this.arrSplice.length-1],this.arrSplice[this.arrSplice.length-1]},craetSplice:function(t,i){return this.create(t,i)},create:function(t,i){if(t=t||{},!(i=i||t.uuid))return this.craetSplice1();this.hesh[i]||(this.craetSplice1().uuid=i);return t&&this.hesh[i].setObj(t),this.hesh[i]},craetPol:function(){for(var t=0;t<this.arrPol.length;t++)if(0==this.arrPol[t].life)return this.arrPol[t].life=!0,this.arrPol[t];var i=this.getPol();return this.arrPol.push(i),this.arrPol[this.arrPol.length-1].idArr=this.arrPol.length-1,this.hesh[this.arrPol[this.arrPol.length-1].uuid]=this.arrPol[this.arrPol.length-1],this.arrPol[this.arrPol.length-1]},render:function(){},getIdPositon:function(t,i){for(var e=0;e<this.arrPoint.length;e++)if(0!=this.arrPoint[e].life&&calc.testPositPoint(this.arrPoint[e].position,t)&&n(this.arrPoint[e],i))return e;function n(t,i){if(!i)return!0;for(var e=t.getConectedSten(),n=0;n<e.length;n++)if(-1!==i.indexOf(e[n].uuid))return!0;return!1}return-1},getPointXY:function(t){for(var i=0;i<this.arrPoint.length;i++)if(this.arrPoint[i].life&&Math.round(t.x)==Math.round(this.arrPoint[i].position.x)&&Math.round(t.y)==Math.round(this.arrPoint[i].position.y))return this.arrPoint[i];var e=this.craetPoint();return e.position.setPoint(t),e},stenInPoint:function(t){var i,e=t.connected?t.connected.arr:void 0,n=this.getIdPositon(t.position,e);(i=-1==n?this.craetPoint():this.arrPoint[n]).position.setPoint(t.position),i.addSplice(t,!0),e=t.connected?t.connected.arr1:void 0,(i=-1==(n=this.getIdPositon(t.position1,e))?this.craetPoint():this.arrPoint[n]).position.setPoint(t.position1),i.addSplice(t,!1)},getObj:function(t){var i={};i.type=this.type,i.tipPoint=this.tipPoint,i.tipSplice=this.tipSplice,i.arrPoint=[],i.arrSplice=[],i.arrPol=[];for(var e=0;e<this.arrPoint.length;e++)this.arrPoint[e].life&&i.arrPoint.push(this.arrPoint[e].getObj());for(e=0;e<this.arrSplice.length;e++)this.arrSplice[e].life&&i.arrSplice.push(this.arrSplice[e].getObj());for(e=0;e<this.arrPol.length;e++)this.arrPol[e].life&&i.arrPol.push(this.arrPol[e].getObj());return i},setObj:function(t){var i;if(null!=t.tipPoint&&(this.tipPoint=t.tipPoint),null!=t.tipSplice&&(this.tipSplice=t.tipSplice),this.arrCreat.length=0,null!=t.arrSplice)for(var e=0;e<t.arrSplice.length;e++)(i=this.craetSplice()).setObj(t.arrSplice[e]),this.arrCreat.push(i);if(null!=t.arrPol)for(e=0;e<t.arrPol.length;e++)(i=this.craetPol()).setObj(t.arrPol[e]);!function(t){for(var i=0;i<t.length;i++)t[i].clearFree()}(this.arrPoint);for(e=0;e<this.arrPoint.length;e++)this.arrPoint[e].life&&this.arrPoint[e].dragGG()},clear:function(){for(var t=0;t<this.arrPoint.length;t++)this.arrPoint[t].clear();for(t=0;t<this.arrSplice.length;t++)this.arrSplice[t].clear();for(t=0;t<this.arrPol.length;t++)this.arrPol[t].clear()}},Object.defineProperties(c.prototype,{delph:{set:function(t){this._delph=t},get:function(){return this._delph}}})}).call(this,e(5))},function(t,i){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,i,e){"use strict";function n(){this.type="SpUtility";var t=[],i=[];this.connectLines=function(e){t.length=0,i.length=0,t=this.tune(e);for(var n=0;n<t.length;n++)i[n]=e.stage.arrSplice[t[n]];return i};var e,n,r=[],s=[];function o(t,i){for(var e=0;e<t.length;e++)if(t[e]==i)return!1;return!0}function a(t){if(n=[],t._addPoint)for(var i=0;i<t._addPoint.arrSHron.length;i++)t.idArr!=t._addPoint.arrSHron[i].sten.idArr&&n.push(t._addPoint.arrSHron[i].sten.idArr);if(t._addPoint1)for(i=0;i<t._addPoint1.arrSHron.length;i++)t.idArr!=t._addPoint1.arrSHron[i].sten.idArr&&n.push(t._addPoint1.arrSHron[i].sten.idArr);return n}this.tune=function(t){arrSplice=t.stage.arrSplice,r.length=0,s.length=0,r.push(t.idArr),e=a(t);for(var i=0;i<e.length;i++)s.push(e[i]);for(i=0;i<s.length;i++)if(1==o(r,s[i])){r.push(s[i]),e=a(arrSplice[s[i]]);for(var n=0;n<e.length;n++)s.push(e[n])}return r}}e.d(i,"a",function(){return n})},function(t,i,e){"use strict";e.d(i,"a",function(){return r});var n=e(0);function r(t){var i=this;this.filterRect=void 0,this.stage=t;var e=new n.e;function r(t){return g().filter(d).filter(s,t)}function s(t){return calc.isParalel(this.position,this.position1,t.position,t.position1,3*calc.DEG2RAD)}function o(t,i){return t.addPoint.idArr===i.addPoint.idArr&&t.addPoint1.idArr===i.addPoint1.idArr||t.addPoint.idArr===i.addPoint1.idArr&&t.addPoint1.idArr===i.addPoint.idArr}function a(t,i){for(var e=0;e<i.length;e++)if(o(t,i[e]))return!0}function h(t,i){for(var e=0;e<i.length;e++)if(t.idArr===i[e].idArr)return!0}function l(t,i,e){return e.indexOf(t)===i}this.filterRect=void 0,this.paralelSten=function(t){i.filterRect=void 0,t&&(e.setRect(t.getRect()),i.filterRect=e);var n=function(t,e){for(var n=new DataChangeSp,r=0;r<t.length;r++){var s=i.setPointWalls(t[r].position,i.filterRect,e);n.add(s)}return n}(function(t){for(var i=[],e=0;e<t.length;e++)t[e].addPoint&&i.push(t[e].addPoint),t[e].addPoint1&&i.push(t[e].addPoint1);return i.filter(l)}(r(t)),t),s=function(t){for(var i=[],e=r(t),n=0;n<e.length;n++)for(var s=0;s<e.length;s++)e[n].idArr!==e[s].idArr&&o(e[n],e[s])&&i.push(e[n]);return i}(t);if(s.length<=1)return n;var c=function(t,i){for(var e=[],n=0;n<t.length;n++)h(t[n],i)||-1===e.indexOf(t[n])&&(t[n].rememberState(),t[n].clear(),e.push(t[n]));return e}(s,function(t,i){for(var e=[],n=0;n<t.length;n++)i.idArr!==t[n].idArr&&(a(t[n],e)||e.push(t[n]));return e}(s,t));return n.arrClearSplice=c,n};var c=5;function p(t,i){var e=!0;return e&&t.idArr==i.idArr&&(e=!1),!e||t.addPoint&&t.addPoint1&&i.addPoint&&i.addPoint1||(e=!1),!e||t.addPoint.idArr!=i.addPoint.idArr&&t.addPoint.idArr!=i.addPoint1.idArr||(e=!1),!e||t.addPoint1.idArr!=i.addPoint.idArr&&t.addPoint1.idArr!=i.addPoint1.idArr||(e=!1),e}function d(t){return!!t.life&&!(i.filterRect&&!calc.isIntersectionRect(i.filterRect,t.getRect()))}function u(t){var e=i.stage.spRelief.snappingPoint;i.stage.spRelief.snappingPoint=1,i.stage.spRelief.slitTestPoint(t),i.stage.spRelief.snappingPoint=e}function g(){return i.stage.arrSplice}function f(){return i.stage.arrPoint}function P(t,e){return i.stage.spRelief.getRadiusPoint(t,e)}function y(t,i){var e=[],n=null;if(0==t.tip&&0==i.tip)null!=(n=calc.getPointOfIntersection(t.addPoint.position,t.addPoint1.position,i.addPoint.position,i.addPoint1.position))&&e.push(new Position(n.x,n.y));else if(1==t.tip&&0==i.tip)for(var r=t.lineRange.arrPosit,s=0;s<r.length-1;s++)null!=(n=calc.getPointOfIntersection(r[s],r[s+1],i.addPoint.position,i.addPoint1.position))&&e.push(new Position(n.x,n.y));else if(0==t.tip&&1==i.tip)for(r=i.lineRange.arrPosit,s=0;s<r.length-1;s++)null!=(n=calc.getPointOfIntersection(t.addPoint.position,t.addPoint1.position,r[s],r[s+1]))&&e.push(new Position(n.x,n.y));else if(1==t.tip&&1==i.tip){r=t.lineRange.arrPosit;var o=i.lineRange.arrPosit;for(s=0;s<r.length-1;s++)for(var a=0;a<o.length-1;a++)null!=(n=calc.getPointOfIntersection(o[a],o[a+1],r[s],r[s+1]))&&e.push(new Position(n.x,n.y))}return(t.tip>1||i.tip>1)&&window.console.warn("нужно добавить для этого типа пересечения",t.tip,i.tip),e}this.setIntersectStenPoint=function(t){for(var e=new DataChangeSp,n=this.getPointOfIntersectionSten(t),r=0;r<n.length;r++){var s=i.setPointWalls(n[r],t);e.add(s)}return e},this.getPointOfIntersectionSten=function(t){i.filterRect=t;for(var e=g().filter(d),n=[],r=0;r<e.length;r++)for(var s=r;s<e.length;s++)p(e[r],e[s])&&(n=y(e[r],e[s]).concat(n));return function(t){for(var i=0;i<t.length;i++)for(var e=0;e<t.length;e++)if(i!=e&&calc.getDistance(t[i],t[e])<c){t.splice(i,1),i=0;break}for(var n=-1,i=0;i<t.length;i++)-1!=(n=P(t[i],c))&&t[i].set(f()[n].position.x,f()[n].position.y)}(n),n},this.setPointWalls=function(t,e,n){var r=null,s=new DataChangeSp;i.filterRect=e;var o=i.stage.craetPoint();o.position.set(t.x,t.y);for(var a=g().filter(d).filter(function(t){return null!=t.isPointInLin(o.position,t.delph/4,t.delph/4)&&calc.getDistance(o.position,t.addPoint.position)>c&&calc.getDistance(o.position,t.addPoint1.position)>c}),h=0;h<a.length;h++)a[h].rememberState(),r=a[h].dividedSten(o,!0),s.arrNewSplice.push(r),s.arrDividedSplice.push(a[h]),u(o);return o.clearFree(),s.update(),s}}},function(t,i,e){"use strict";var n=e(0);function r(t){var i=this;this.sahAngel=t||10;var e=.1;this.radius=1,this.curvature=e,this.p=new n.c,this.p1=new n.c(1,0),this.p2=new n.c(.5,.5),this.pOCent=new n.c,this.pint90=new n.c,this.arrPosit=[];for(var s=0;s<this.sahAngel;s++)this.arrPosit[s]=new n.c;function o(t,i,e){calc.getVector(calc.getDistance(t,i)+e,calc.getAngle(i,t),t),t.x+=i.x,t.y+=i.y}this.moveLineRange=function(t){o(this.p,this.pOCent,t),o(this.p1,this.pOCent,t),o(this.p2,this.pOCent,t),this.updateFromCurvature(this.getCurrentCurvature())},this.setTwoPoint=function(t,i){this.p.setPoint(t),this.p1.setPoint(i),this.upDate()},this.getLR=function(t,i){this.upDate();var e=new r(this.sahAngel);0===i&&(e.p.setPoint(this.p),e.p1.setPoint(t)),1===i&&(e.p.setPoint(t),e.p1.setPoint(this.p1)),e.p2.set((e.p.x+e.p1.x)/2,(e.p.y+e.p1.y)/2);var n=calc.getAngle(this.pOCent,e.p2);return calc.getVector(this.radius,n,e.p2),e.p2.x+=this.pOCent.x,e.p2.y+=this.pOCent.y,e.updateFromCurvature(e.getCurrentCurvature()),e},this.setLR=function(t){this.p.setPoint(t.p),this.p1.setPoint(t.p1),this.p2.setPoint(t.p2),this.updateFromCurvature(this.getCurrentCurvature())},this.setCurvFromPoint=function(t){this.p2.setPoint(t),this.updateFromCurvature(this.getCurrentCurvature())},this.getCurrentCurvature=function(){return calc.getDistancePointToLine(this.p,this.p1,this.p2)},this.korectPoint2=function(t,i,e){t=t||0,i=i||this.p,e=e||this.p1,calc.getArrPointCircle(this.pOCent,this.radius+t,i,e,this.sahAngel,this.curvature>0,this.arrPosit)},this.upDate=function(){this.updateFromCurvature()};var a=new n.c;this.getPointInLineRange=function(t,i,e,n){e=e||0;var r=calc.getDistance(t,this.pOCent);if(calc.diffNum(r,this.radius)>i)return null;var s=this.getLengthPoint(t),o=this.getLenght();if(s<0||s>o){var h=Math.min(calc.diffNum(s,0),calc.diffNum(s,o));if(!n&&e<h)return null;if(n)return calc.diffNum(s,0)<calc.diffNum(s,o)?(a.setPoint(this.p),a):(a.setPoint(this.p1),a)}return calc.getVector(this.radius,calc.getAngle(this.pOCent,t),a),a.x+=this.pOCent.x,a.y+=this.pOCent.y,a},this.updateFromCurvature=function(t){var n,r,s,o;this.curvature=function(t){var n=calc.getDistance(i.p,i.p1)/2;(t=calc.getValueBetween(t,-n,n))<=0&&t>=-e?t=-e:t>=0&&t<=e&&(t=e);return t}(t||this.curvature),this.pint90.setPoint((n=this.p,r=this.p1,s=this.curvature,o=calc.getAngle(n,r)+90*calc.DEG2RAD,calc.getVector(s,o,h),h.x+=(n.x+r.x)/2,h.y+=(n.y+r.y)/2,h.x=calc.okrugNumber(h.x),h.y=calc.okrugNumber(h.y),h)),this.p2.setPoint(this.pint90);var a=calc.getCenterCircle(this.p,this.p1,this.p2);a&&this.pOCent.setPoint(a),this.radius=calc.getDistance(this.pOCent,this.p),this.korectPoint2()};var h=new n.c;this.getLengthPoint=function(t,i){i&&(t=new n.c(t.x,t.y),calc.rotationPointByLength(t,i*(this.curvature>0?-1:1),this.pOCent));var e=calc.getLenghtCircle(this.radius,this.pOCent,this.p,t,this.curvature>0),r=this.getLenght();if(e>r){var s=calc.getLenghtCircle(this.radius,this.pOCent);e>r+(s-r)/2&&(e-=s)}return e},this.getPositionByLength=function(t){var i=new n.c(this.p.x,this.p.y);return calc.rotationPointByLength(i,t*(this.curvature>0?-1:1),this.pOCent),i},this.getAngleByPoint=function(t,i){i*=this.curvature>0?-1:1;var e=calc.getCircleCircleIntersectionPoints(this.pOCent,this.radius,t,Math.abs(i)),n=i<0?e[0]:e[1];return calc.getAngle(t,n)},this.getLenght=function(){return calc.getLenghtCircle(this.radius,this.pOCent,this.p,this.p1,this.curvature>0)},this.getCurvatureByWidth=function(t){var i=calc.getCurvatureByWidth(t,this.radius);return null===i&&(i=calc.getCurvatureByWidth(2*this.radius*(t<0?-1:1),this.radius)),(i||0)*(this.curvature<0?-1:1)},this.getWidthByLengthTo=function(t){var i=new n.c(this.radius,0),e=new n.c(this.radius,0);return calc.rotationPointByLength(i,t),calc.getDistance(i,e)},this.getLengthByWidth=function(t){return calc.getLengthByWidth(t,i.getCurvatureByWidth(t))}}function s(t){this.otstup=t||50,this.tip=0,this.p=new n.c,this.p1=new n.c,this.p2=new n.c,this.maxp=new n.c,this.maxp1=new n.c,this.maxSp1=new n.c,this.maxp2=new n.c,this.p3=new n.c,this.dist01=0,this.dist12=0,this.p4=new n.c,this.lineRange=new r(20),this.lineRange1=new r(20),this.angel=0;var i,e;this.restertTip=function(t,n,r,s){this.tip=t,0==t&&(this.p.setPoint(n),this.p1.setPoint(r),this.p2.setPoint(s),this.angel=calc.getAngle(n,r),calc.getVector(2e4,this.angel+Math.PI,this.maxp),this.maxp.x+=n.x,this.maxp.y+=n.y,calc.getVector(this.otstup,this.angel,this.maxp1),this.maxp1.x+=r.x,this.maxp1.y+=r.y,this.dist01=calc.getDistance(this.p,this.p1),this.dist12=calc.getDistance(this.p1,this.p2),calc.getVector(2e4,this.angel,this.maxSp1),this.maxSp1.x+=r.x,this.maxSp1.y+=r.y,i=calc.getDistance(this.p1,this.p2),e=calc.getAngle(this.p1,this.p2),calc.getVector(2*i,e,this.p3),this.p3.x+=this.p.x,this.p3.y+=this.p.y),1==t&&(this.dist12=Math.abs(r),null!=s?(this.lineRange.p.setPoint(n.p1),this.lineRange.p1.setPoint(n.p),this.lineRange.p2.setPoint(n.p2),this.lineRange.updateFromCurvature(this.lineRange.getCurrentCurvature()),this.lineRange1.p.setPoint(n.p1),this.lineRange1.p1.setPoint(n.p),this.lineRange1.p2.setPoint(n.p2),this.lineRange1.updateFromCurvature(this.lineRange1.getCurrentCurvature()),this.lineRange.moveLineRange(r)):(this.lineRange.setLR(n),this.lineRange.moveLineRange(r),this.lineRange1.setLR(n)))},this.dragOtstup=function(t){0==this.tip&&(calc.getVector(t,this.angel,this.maxp1),this.maxp1.x+=this.p1.x,this.maxp1.y+=this.p1.y)}}function o(t){var i,e,n,r,s,o,a,l=!1;function c(i){i.forEach(function(i){t.dPoint(i,5*Math.random()+6,16777215*Math.random())})}this.getPeresek=function(p,d){if(0==p.tip&&0==d.tip)return function(t,n){var o=new h;if(0==t.tip&&0==n.tip)return o.p.setPoint(t.p1),o.p1.setPoint(t.p1),o.p2.setPoint(t.p2),(s=t.otstup)<2*t.dist12&&(s=2*t.dist12),s<2*n.dist12&&(s=2*n.dist12),t.dragOtstup(s),n.dragOtstup(s),r=calc.getTreeAngel(t.p,t.p1,n.p),314==Math.abs(Math.round(100*r))?(o.p.setPoint(t.p1),o):0==Math.abs(Math.round(100*(t.angel-n.angel)))?(o.p.setPoint(t.p1),o):null!=(i=calc.getPointOfIntersection(t.p,t.maxp1,n.maxp,n.maxp1))?null!=(e=calc.getPointOfIntersection(t.p,t.p1,n.p,n.p3))?(o.p.setPoint(e),o.p1.setPoint(e),o):(o.p.setPoint(i),o.p1.setPoint(i),o):t.dist12>n.dist12&&null!=(i=calc.getPointOfIntersection(t.p,t.maxp,n.p,n.maxp))?(o.p1.setPoint(t.p2),o):null!=(i=calc.getPointOfIntersection(t.p1,t.p2,n.maxp,n.maxp1))?(o.p1.setPoint(i),o.p.setPoint(t.p1),o):null!=(e=calc.getPointOfIntersection(t.p,t.p1,n.p,n.p3))?(o.p.setPoint(e),o.p1.setPoint(e),o):null!=(i=calc.getPointOfIntersection(t.p,t.maxSp1,n.p1,n.p2))?(o.p.setPoint(i),o.p1.setPoint(i),o):null!=(i=calc.getPointOfIntersection(t.p,t.maxSp1,n.p1,n.maxp1))?(o.p.setPoint(i),o.p1.setPoint(i),o):null!=(i=calc.getPointOfIntersection(t.p,t.maxSp1,n.p1,n.maxSp1))?(o.p.setPoint(t.maxp1),o.p1.set((t.maxp1.x+n.maxp1.x)/2,(t.maxp1.y+n.maxp1.y)/2),null!=(e=calc.getPointOfIntersection(t.p1,t.maxp1,n.p1,n.maxp1))&&(o.p1.setPoint(e),o.p.setPoint(e)),o):o}(p,d);if(0==p.tip&&1==d.tip)return function(i,e){var r=Math.min(i.dis/2,e.dis/2),o=new h;if(0==i.tip&&1==e.tip){if(o.p.setPoint(i.p),o.p1.setPoint(i.p1),o.p2.setPoint(i.p2),(s=i.otstup)<2*i.dist12&&(s=2*i.dist12),s<2*e.dist12&&(s=2*e.dist12),i.dragOtstup(s),(n=calc.getLineCircleIntersectionPoints(i.maxp1,i.p,e.lineRange.pOCent,e.lineRange.radius)).length>1&&calc.getDistance(o.p1,n[0])>calc.getDistance(o.p1,n[1])&&n.reverse(),l&&(t.dPoint(o.p1,15,16711935),t.dPoint(i.maxp1,6,255),t.dPoint(o.p,7,255),t.dLine(o.p,i.maxp1,255,3),t.dPoint(e.lineRange.pOCent,e.lineRange.radius,255,8)),0!=n.length&&calc.getDistance(n[0],o.p1)<r)return l&&(c(n),t.dPoint(n[0],8,65535)),o.p.setPoint(n[0]),o.p1.setPoint(n[0]),o;o.p.setPoint(i.p1)}return o}(p,d);if(1==p.tip&&0==d.tip)return function(i,e){var r=Math.min(i.dis/2,e.dis/2),o=new h;if(1==i.tip&&0==e.tip){if(o.p.setPoint(e.p),o.p1.setPoint(e.p1),o.p2.setPoint(e.p2),(s=e.otstup)<2*i.dist12&&(s=2*i.dist12),s<2*e.dist12&&(s=2*e.dist12),e.dragOtstup(s),(n=calc.getLineCircleIntersectionPoints(e.maxp1,e.p,i.lineRange.pOCent,i.lineRange.radius,!0)).length>1&&calc.getDistance(o.p1,n[0])>calc.getDistance(o.p1,n[1])&&n.reverse(),l&&(t.dPoint(e.maxp1,6,255),t.dPoint(o.p1,15,16711935),t.dPoint(o.p,7,255),t.dLine(o.p,e.maxp1,255,3),t.dPoint(i.lineRange.pOCent,i.lineRange.radius,255,8)),0!=n.length&&calc.getDistance(n[0],o.p1)<r)return l&&(c(n),t.dPoint(n[0],8,65535)),o.p.setPoint(n[0]),o.p1.setPoint(n[0]),o;o.p.setPoint(e.p1)}return o}(p,d);if(1==p.tip&&1==d.tip)return function(e,r){var p=Math.min(e.dis/2,r.dis/2),d=new h;if(1==e.tip&&1==r.tip){if((s=r.otstup)<2*e.dist12&&(s=2*e.dist12),s<2*r.dist12&&(s=2*r.dist12),d.p.setPoint(e.lineRange.p),d.p1.setPoint(e.lineRange.p),d.p2.setPoint(e.lineRange1.p),n=calc.getCircleCircleIntersectionPoints(e.lineRange.pOCent,e.lineRange.radius,r.lineRange.pOCent,r.lineRange.radius),l&&(t.dPoint(e.lineRange.pOCent,e.lineRange.radius,255,8),t.dPoint(r.lineRange.pOCent,r.lineRange.radius,255,8)),0!=n.length){if(1==n.length)return l&&t.dPoint(n[0],8,65535),d.p.setPoint(n[0]),d.p1.setPoint(n[0]),d;o=calc.getDistance(d.p2,n[0]),a=calc.getDistance(d.p2,n[1]),o<a?(dis=o,i=n[0]):(dis=a,i=n[1]),l&&(c(n),t.dPoint(n[0],8,65535),t.dPoint(d.p2,10,15794175)),dis<e.delph+r.delph&&dis<p&&(d.p.setPoint(i),d.p1.setPoint(i))}e.dist12,r.dist12}return d}(p,d);throw new Error("err type bla="+p.tip+" blaX="+d.tip)}}function a(){var t,i=new s(20),e=new s(20);this.korektPoint=new o(this),this.generateUUID=function(){for(var t=[],i=0;i<256;i++)t[i]=(i<16?"0":"")+i.toString(16);return function(){var i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]+"-"+t[255&e]+t[e>>8&255]+"-"+t[e>>16&15|64]+t[e>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),this.getAngle=function(t,i){return i=i||rezNull,t=t||rezNull,Math.atan2(i.y-t.y,i.x-t.x)},this.getDistance=function(t,i){return null==t?0:(null==i&&(i=rezNull),i=i||rezNull,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)))};var n,r,a,l=[new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0),new THREE.Vector2(0,0)];this.creatGrani2=function(i,e,s){if(t=i.sten,0==i.storona)if(l[0].x=e.p.x,l[0].y=e.p.y,l[1].x=e.p1.x,l[1].y=e.p1.y,l[2].x=e.p2.x,l[2].y=e.p2.y,l[3].x=s.p2.x,l[3].y=s.p2.y,l[4].x=s.p1.x,l[4].y=s.p1.y,l[5].x=s.p.x,l[5].y=s.p.y,n=i.sten.position1,r=-t._rotation,i.sten.bolPosit1=!0,0==i.sten.tip){for(var o=0;o<6;o++)l[o]=calc.povotorOtAngel(n,l[o],r);for(o=0;o<6;o++)i.sten.arrPosit1[o].set(l[o].x,l[o].y)}else if(1==i.sten.tip)if(i.sten.lineRange.curvature>0)for(o=0;o<6;o++)i.sten.arrPosit1[o].set(l[o].x,l[o].y);else for(o=0;o<6;o++)i.sten.arrPosit1[o].set(l[5-o].x,l[5-o].y);else window.console.warn("непонял как считить  ",i.sten.tip);else if(l[0].x=e.p.x,l[0].y=e.p.y,l[1].x=e.p1.x,l[1].y=e.p1.y,l[2].x=e.p2.x,l[2].y=e.p2.y,l[3].x=s.p2.x,l[3].y=s.p2.y,l[4].x=s.p1.x,l[4].y=s.p1.y,l[5].x=s.p.x,l[5].y=s.p.y,n=i.sten.position,r=-t._rotation,i.sten.bolPosit=!0,0==i.sten.tip){for(o=0;o<6;o++)l[o]=calc.povotorOtAngel(n,l[o],r);for(o=0;o<6;o++)i.sten.arrPosit[o].set(-l[o].x,l[o].y)}else if(1==i.sten.tip)if(i.sten.lineRange.curvature>0)for(o=0;o<6;o++)i.sten.arrPosit[o].set(l[5-o].x,l[5-o].y);else for(o=0;o<6;o++)i.sten.arrPosit[o].set(l[o].x,l[o].y);else window.console.warn("непонял как считить  ",i.sten.tip)};var c,p,d,u=0;this.debagOk=function(t){return!1};new h;var g,f,P=new h,y=new h;this.korektSHObject=function(t,i){if(g=(f=t).arrSHron.length,p=f.arrSHron[i],1==g&&(0==p.sten.tip?1==p.storona?(p.sten.bolPosit=!1,p.sten.arrPosit[0].set(0,p.sten.delph/2),p.sten.arrPosit[1].set(0,p.sten.delph/2),p.sten.arrPosit[2].set(0,0),p.sten.arrPosit[3].set(0,0),p.sten.arrPosit[4].set(0,-p.sten.delph/2),p.sten.arrPosit[5].set(0,-p.sten.delph/2)):(p.sten.bolPosit1=!1,p.sten.arrPosit1[0].set(0,-p.sten.delph/2),p.sten.arrPosit1[1].set(0,-p.sten.delph/2),p.sten.arrPosit1[2].set(0,0),p.sten.arrPosit1[3].set(0,0),p.sten.arrPosit1[4].set(0,p.sten.delph/2),p.sten.arrPosit1[5].set(0,p.sten.delph/2)):1==p.sten.tip?1==p.storona?(p.sten.bolPosit=!0,p.sten.arrPosit[0].setPoint(p.sten.lineRange.p),p.sten.arrPosit[1].setPoint(p.sten.lineRange.p),p.sten.arrPosit[2].setPoint(p.sten.lineRange.p),p.sten.arrPosit[3].setPoint(p.sten.lineRange.p),p.sten.arrPosit[4].setPoint(p.sten.lineRange.p),p.sten.arrPosit[5].setPoint(p.sten.lineRange.p)):(p.sten.bolPosit1=!0,p.sten.arrPosit1[0].setPoint(p.sten.lineRange.p1),p.sten.arrPosit1[1].setPoint(p.sten.lineRange.p1),p.sten.arrPosit1[2].setPoint(p.sten.lineRange.p1),p.sten.arrPosit1[3].setPoint(p.sten.lineRange.p1),p.sten.arrPosit1[4].setPoint(p.sten.lineRange.p1),p.sten.arrPosit1[5].setPoint(p.sten.lineRange.p1)):window.console.warn("непонял как считить  ",p.sten.tip)),g>1){var e=0,n=0;e=0==i?f.arrSHron.length-1:i-1,n=i>=f.arrSHron.length-1?0:i+1,c=f.arrSHron[e],p=f.arrSHron[i],d=f.arrSHron[n];var r=!1;g>2?(d=f.arrSHron[e],p=f.arrSHron[i],c=f.arrSHron[n]):(c=f.arrSHron[e],p=f.arrSHron[i],d=f.arrSHron[n]),P=this.getLineStan2(p,c,r),r=!r,y=this.getLineStan2(p,d,r),this.creatGrani2(p,P,y)}},this.getSten2AddPoint=function(t,i){return null!=t.addPoint&&t.addPoint.idArr==i.idArr&&null!=t.addPoint1?t.addPoint1:null!=t.addPoint1&&t.addPoint1.idArr==i.idArr&&null!=t.addPoint?t.addPoint:null};var x=new THREE.Vector3(0,0);this.testAngel=function(t){if((g=t.arrSHron.length)<=1)return null;for(var i=0;i<t.arrSHron.length;i++)for(var e=i+1;e<t.arrSHron.length;e++)if(c=t.arrSHron[i],p=t.arrSHron[e],0==c.storona?(l[0].x=c.sten.position.x,l[0].y=c.sten.position.y,l[1].x=c.sten.position1.x,l[1].y=c.sten.position1.y):(l[0].x=c.sten.position1.x,l[0].y=c.sten.position1.y,l[1].x=c.sten.position.x,l[1].y=c.sten.position.y),0==p.storona?(l[2].x=p.sten.position.x,l[2].y=p.sten.position.y):(l[2].x=p.sten.position1.x,l[2].y=p.sten.position1.y),r=calc.getTreeAngel(l[0],l[1],l[2]),Math.abs(r)>3&&null!=(x=calc.isPointInLin(l[0],l[2],l[1],5,5)))return x;return null},this.getLineStan2=function(t,n,r,s,o){return i.delph=t.sten.delph+(s||0),e.delph=n.sten.delph+(o||0),i.dis=calc.getDistance(t.sten.position,t.sten.position1),e.dis=calc.getDistance(n.sten.position,n.sten.position1),u=5,i.delph/2+1>u&&(u=i.delph+1),e.delph/2+1>u&&(u=e.delph+1),a=1,1==r&&(a=-1),0==t.sten.tip?(0==t.storona?(l[0].x=l[2].x=l[4].x=t.sten.position.x,l[0].y=l[2].y=l[4].y=t.sten.position.y,l[1].x=l[3].x=l[5].x=t.sten.position1.x,l[1].y=l[3].y=l[5].y=t.sten.position1.y):(l[0].x=l[2].x=l[4].x=t.sten.position1.x,l[0].y=l[2].y=l[4].y=t.sten.position1.y,l[1].x=l[3].x=l[5].x=t.sten.position.x,l[1].y=l[3].y=l[5].y=t.sten.position.y),calc.korektToLine(l[0],l[1],0,-i.delph/2*a),i.restertTip(0,l[0],l[1],l[3])):1==t.sten.tip?1==r?1==t.storona?t.sten.lineRange.curvature>0?i.restertTip(1,t.sten.lineRange,-i.delph/2):i.restertTip(1,t.sten.lineRange,i.delph/2):t.sten.lineRange.curvature>0?i.restertTip(1,t.sten.lineRange,i.delph/2,!0):i.restertTip(1,t.sten.lineRange,-i.delph/2,!0):1==t.storona?t.sten.lineRange.curvature>0?i.restertTip(1,t.sten.lineRange,i.delph/2):i.restertTip(1,t.sten.lineRange,-i.delph/2):t.sten.lineRange.curvature>0?i.restertTip(1,t.sten.lineRange,-i.delph/2,!0):i.restertTip(1,t.sten.lineRange,i.delph/2,!0):window.console.warn("непонял как считить  ",t.sten.tip),0==n.sten.tip?(0==n.storona?(l[6].x=l[8].x=l[10].x=n.sten.position.x,l[6].y=l[8].y=l[10].y=n.sten.position.y,l[7].x=l[9].x=l[11].x=n.sten.position1.x,l[7].y=l[9].y=l[11].y=n.sten.position1.y):(l[6].x=l[8].x=l[10].x=n.sten.position1.x,l[6].y=l[8].y=l[10].y=n.sten.position1.y,l[7].x=l[9].x=l[11].x=n.sten.position.x,l[7].y=l[9].y=l[11].y=n.sten.position.y),calc.korektToLine(l[6],l[7],0,e.delph/2*a),e.restertTip(0,l[6],l[7],l[9])):1==n.sten.tip?1==r?0==n.storona?n.sten.lineRange.curvature>0?e.restertTip(1,n.sten.lineRange,-e.delph/2,!0):e.restertTip(1,n.sten.lineRange,e.delph/2,!0):n.sten.lineRange.curvature>0?e.restertTip(1,n.sten.lineRange,e.delph/2):e.restertTip(1,n.sten.lineRange,-e.delph/2):0==n.storona?n.sten.lineRange.curvature>0?e.restertTip(1,n.sten.lineRange,e.delph/2,!0):e.restertTip(1,n.sten.lineRange,-e.delph/2,!0):n.sten.lineRange.curvature>0?e.restertTip(1,n.sten.lineRange,-e.delph/2):e.restertTip(1,n.sten.lineRange,e.delph/2):window.console.warn("непонял как считить  ",n.sten.tip),this.korektPoint.getPeresek(i,e)}}function h(t,i){this.p=t||new l,this.p1=i||new l,this.p2=new l,this.status=0,this.perpendik=!0,this.angel=0,this.set=function(t,i){this.p=t||0,this.p1=i||0}}function l(t,i,e){this._x=t||0,this._y=i||0,this._z=e||0,this.set=function(t,i,e){this._x=t||0,this._y=i||0,void 0!==e&&(this._z=e)},this.setPoint=function(t){this._x=t.x,this._y=t.y,void 0!==t.z&&(this._z=t.z)},this.getObj=function(){var t={};return t.x=this._x,t.y=this._y,t.z=this._z,t},this.copy=function(){return new l(this._x,this._y,this._z)}}e.d(i,"b",function(){return a}),e.d(i,"a",function(){return h}),l.prototype={set x(t){this._x=t},get x(){return this._x},set y(t){this._y=t},get y(){return this._y},set z(t){this._z=t},get z(){return this._z}}},function(t,i,e){"use strict";e.r(i),function(t){var n=e(4);e.d(i,"SpStage",function(){return n.a});var r=e(1);e.d(i,"SpPoint",function(){return r.a});var s=e(3);e.d(i,"SpPol",function(){return s.a});var o=e(2);e.d(i,"Splice",function(){return o.a}),t.SpStage=n.a,t.SpPoint=r.a,t.SpPol=s.a,t.Splice=o.a}.call(this,e(5))}]);